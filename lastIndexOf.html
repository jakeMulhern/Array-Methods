<script src="../simpleTest.js"></script>
<script>

// MDN Definition:
// The lastIndexOf() method returns the index within the calling 
// String object of the last occurrence of the specified value, 
// searching backwards from fromIndex. Returns -1 if the value is 
// not found.

// NOTES:
// It should use strict equality.


// lastIndexOf REQUIREMENTS:

// DONE When it finds a match to searchValue, it should only return the index of the element.
// DONE If startingIndex is given as optional third argument, it should begin the search at startingIndex.
// DONE If no elements in originalArray match searchValue, it should return -1.
// DONE If startingIndex is given as optional third argument, it should start search from the index, still moving right to left.
// DONE It should default the starting position of the search to array.length-1.
// DONE If startingIndex is greater than or equal to array.length, it should search the enitre array.
// DONE If startingIndex is a negative number, it should start that many spaces offset from the end of the array.
// DONE If calculated startingIndex is less than 0, it should return -1.
  // Ex: lastInfexOf([1], 1, -2)
      // returns -1.



function lastIndexOf(array, searchValue, startingIndex) {
  if (arguments.length > 2) {
    if (startingIndex >= array.length) {
      for (var k = array.length-1; k > -1; k--) {
        if (array[k] === searchValue) {
          return k;
        }
      }
    } else if (startingIndex < 0) {
        if (array.length + startingIndex < 0) {
          return -1;
        } else {
          for (var l = (array.length-1) + startingIndex; l > -1; l--) {
            if (array[l] === searchValue) {
              return l;
            }
          }
        }
    } else {
      for (var j = startingIndex; j > -1; j--) {
        if (array[j] === searchValue) {
          return j;
        }
      }
    }
  }
  for (var i = array.length-1; i > -1; i--) {
    if (array[i] === searchValue) {
      return i;
    }
    return -1;
  }
}


tests({

  'When it finds a match to searchValue, it should only return the index of the element.': function() {
    var myArray = [1];
    var result = lastIndexOf(myArray, 1);
    eq(result, 0);
  },
  'It should search the array for an element that matches searchValue from right to left.': function() {
    var myArray = [1, 2, 1];
    var result = lastIndexOf(myArray, 1);
    eq(result, 2);
  },
  'If no elements in originalArray match searchValue, it should return -1.': function() {
    var myArray = [1];
    var result = lastIndexOf(myArray, 2);
    eq(result, -1);
  },
  'If startingIndex is given as optional third argument, it should start search from the index, still moving right to left.': function() {
    var myArray = [1, 2, 1, 3, 1];
    var result = lastIndexOf(myArray, 1, 3);
    eq(result, 2);
  },
  'It should default the starting position of the search to array.length-1.': function() {
    var myArray = [2, 2];
    var result = lastIndexOf(myArray, 2);
    eq(result, 1);
  },
  'If startingIndex is greater than or equal to array.length, it should search the enitre array.': function() {
    var myArray = [2, 2];
    var result = lastIndexOf(myArray, 2, 4);
    eq(result, 1);
  },
  'If startingIndex is a negative number, it should start that many spaces offset from the end of the array.': function() {
    var myArray = [1, 1, 1];
    var result = lastIndexOf(myArray, 1, -1);
    eq(result, 1);
  },
  'If calculated startingIndex is less than 0, it should return -1.': function() {
    var myArray = [1, 1];
    var result = lastIndexOf(myArray, 1, -3);
    eq(result, -1);
  }




});
</script>